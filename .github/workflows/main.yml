- name: Setup Ruby
  uses: ruby/setup-ruby@v1
  with:
    ruby-version: 3.1

- name: Install changelog generator
  run: gem install github_changelog_generator -v 1.16.4

- name: Generate changelog
  run: |
    github_changelog_generator \
      --user Cgaz275 \
      --project GITHUB_NHOM_KTPM_DCT122C3_2025 \
      --token ${{ secrets.GITHUB_TOKEN }} \
      --issues-wo-labels \
      --pr-wo-labels \
      --output CHANGELOG.md

- name: Commit and push changelog
  run: |
    git config user.name "github-actions[bot]"
    git config user.email "github-actions[bot]@users.noreply.github.com"
    git add CHANGELOG.md
    git commit -m "docs: update changelog"
    git push
